<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>usage of x86InfoAndControl</title></head>
<body><h2>Usage</h2>To find and set low voltages for
a specific CPU core
frequency:<ol><li>recommendation:
start the GUI as administrator (starting as normal user with temporary
administrative rights is not sufficient to disable the OS' DVFS)</li><li><a name="no_p-state_config_file"></a>If the GUI shows a similiar error message like this:<br><img alt="x" src="Screenshots/GUI/x86InfoAndControl_p-state_config_file_missing.PNG" height="139" width="638"><br>then create this config. file: <br>1. press "OK"<br>2. Put the laptop in AC mode to ensure you can also run the CPU with high frequencies. <br>-choose a power scheme that covers all frequencies (like "presentation")<br>-ensure no (other) program (like RMclock) modified the performance states from the default ones<br><br>-possibly disable Windows' dyn vfs:</li><li><b>Disable</b>
the <b>OS's</b> <a href="http://en.wikipedia.org/wiki/Dynamic_frequency_scaling">dynamic
voltage and frequency <b>scaling</b></a>:<br><img alt="x" src="Screenshots/GUI/menu%20%27extras%27--no_power_profile_access.PNG" height="339" width="450"><br>if the option is grayed out like here then you should start the program as administrator.<br><font color="#ff0000"><br><img alt="disable_OS's_dynamic_frequency_scaling" src="Screenshots/GUI/menu_%27Extras%27_OS%27_DVFS_menu_item_marked.PNG" height="347" width="484"><font color="#000000"><br>here disabling is possible.<br><br>If
you&nbsp;<a href="x86InfoAndControl_usage.html#high_load">start
a high load</a> and it doesn't change to performance state
"0"&nbsp;<br>If &nbsp;you change the CPU load (to 100%)
and the operating frequency does not go up <br>/ if the CPU
frequency does not change<br>then it's pretty sure that the OS's
dynamic
frequency scaling is disabled.</font></font></li><li>-the OS' DVFS should be active in order to get at least the minimum and maximum performance states.<br>-ensure you have a low CPU usage in order to detect even the low frequencies<br>-x86info&amp;control learns the p-states it reads. but usually it will not learn all p-states/ possible CPU core frequencies:<br>at the beginning 2 p-states:<br><img alt="x" src="Screenshots/GUI/2_p-states_learned.PNG" height="340" width="450"><br>and after a while 4 p-states:<br><img alt="x" src="Screenshots/GUI/4_p-states_learned.PNG" height="340" width="450"><br>But in order to get more frequencies, do (therefore it could be useful to disable the OS' DVFS):<br><img alt="x" src="Screenshots/GUI/menu_item_%27find_different_p-states%27.PNG" height="339" width="450"><br>do this ca. 5 times in order to get all or nearly all possible CPU core frequencies<br>then this is a possible result:<br><img alt="x" src="Screenshots/GUI/after_%27find_different_p-states%27_OS%27_got_nearly_all_freqs.PNG" height="340" width="450"><br>3. either save to file:<br><img alt="x" src="Screenshots/GUI/%27save_performance_states%27_menu.PNG" height="433" width="665"><br>or: manually: insert as much of the voltage-frequency pairs you can see here into the config file with the path that was&nbsp;<a href="#no_p-state_config_file">shown before<br></a><ul><li>note the <a href="p-state_configuration_file.html">Structure
of the performance-state config file</a></li><li>assign the voltage to the "<a href="p-state_configuration_file.html#max_voltage_in_Volt">max_voltage_in_Volt</a>" attribute.<br><a href="#voltage_in_Volt">voltage_in_Volt</a>, <font face="Courier" size="-1"><a href="#min_voltage_in_Volt">min_voltage_in_Volt</a> are examined and set afterwards, usually you do no know them before</font></li></ul></li><li><b>Start the x86InfoAndControl GUI</b>
without any or little voltage / Voltage ID difference to the default
voltages in the (configuration file) settings (else the Operating
System may freeze without knowing the lowest stable voltage for a
specific performance state)</li><li><font color="#ff0000"><font color="#000000">Open the
settings for the CPU core you want
to test (example here: for core "0"):<br><img alt="ss" src="Screenshots/GUI/x86InfoAndControl_core0settings_menu_item.PNG" height="347" width="484"><br></font></font></li><li><font color="#ff0000"><font color="#000000"><b><a name="select_p-state"></a>select</b>
the<b> p-state</b> you want to test. <br>You need to
test at least 2 frequencies: <br></font></font><ul><li><font color="#ff0000"><font color="#000000">the
maximum frequency<br>and&nbsp;</font></font></li><li><font color="#ff0000"><font color="#000000">a low
/the lowest frequency. <br></font></font></li></ul><font color="#ff0000"><font color="#000000">The
voltages for the intermediate frequencies are interpolated if not
specified.</font></font><br><font color="#ff0000"><font color="#000000">I would suggest to start with the maximum
frequency</font></font><font color="#ff0000"><font color="#000000">(p-state "0")</font></font><font color="#ff0000"><font color="#000000">:<br><img src="Screenshots/GUI/x86InfoAndControl_core0settings.PNG" alt="ee" height="270" width="322"></font></font><br><br> </li><li>Exit
as many programs as possible. A too low voltage can taint the RAM and
so cause malfunction in other programs even maybe to the filesystem?</li><li><a name="high_load"></a>for the CPU core to test:</li><ul><ul><li>run
the "<a href="http://mersenneforum.org/gimps/p95v259.zip">Prime95</a>" CPU stress application<br><ul><li>then
you probably have to start as many threads as there are CPU cores
because else you can not assign a high load thread to a specific CPU
core with Prime95 <br>(I think its because if there is&nbsp;
more than 1
CPU core then Windows' process scheduler switches the thread among the
cores to achieve a similar load for each core)</li><li>or
you start one thread and use Windows' task manager to assign the stress
program to 1 CPU core</li><li><img alt="x" src="Screenshots/Prime95/Prime95_menu_item_%27Torture_Test...%27_marked.PNG" height="476" width="465"></li><li><img alt="x" src="Screenshots/Prime95/Prime95_%27Torture_Test%27_dialog_%27Small_FFTs%27_marked.PNG" height="476" width="513"></li></ul>Advantage
with Prime95: often you see a&nbsp;<a href="Screenshots/Prime95_%27FATAL_ERROR%27_marked.PNG">calculation
error</a> when it stops
calculating. That is a hint that the voltage is too low.<br>Then you should increase the voltage
for the performance state the calculation error occured in as soon as
possible. So you can avoid a reboot because of system instability.</li></ul></ul><li><a name="memorize_current_voltage"></a>memorize/ write down the
current&nbsp;voltage&nbsp;(let's call it "<i>lowest_stable_voltage</i>"); Do this for the case that the device /PC might hang/freeze/restart.</li><li><a name="decrease_the_voltage_by_1_step"></a><b>decrease
the voltage&nbsp;</b><b>by
1 step&nbsp;: <br></b>If &nbsp;you have reached
the lowest settable voltage and want to test for low voltages: select
the next higher frequency. Then you needn't change&nbsp; the
voltage.<b><br></b>Hit the tabular key until the
voltage ID slider has the input focus<b><br><img alt="ss" src="Screenshots/GUI/x86InfoAndControl_core0settings_VID_slider_marked.PNG" height="270" width="322"><br></b>Now
press the arrow key once shortly so that the voltage is decreased by 1
voltage step.<b><br></b></li><li>press
the "Write p-state" button:<br><img alt="write p-state button" src="Screenshots/GUI/x86InfoAndControl_core0settings_%27Write%20p-state%27_marked.PNG" height="270" width="322"></li><li>wait
some
seconds or minutes to check if the settings are stable<br><ul><li>If
a voltage is too low for a specific frequency, sometimes Prime95 shows
calc error after a few seconds, sometimes it lasts 5 minutes or even
more.</li></ul></li><li><ul><li>If
the <b>voltage</b> does <b>not</b> seem to be
<b>too low</b>, e.g.<br><ul><li>not
freezed</li><li>Prime95 has no calculation errors</li></ul>then
go to step&nbsp;<a href="#memorize_current_voltage">memorize
the current voltage</a></li><li>If &nbsp;there is
a sign that the <b>voltage</b> is <b>too low</b>,
e.g.:<br><ul><li>device&nbsp;(e.g. laptop) is
freezed:&nbsp;<br><ul><li>restart
the device (e.g. laptop)</li><li>remember the voltage "<i>lowest_stable_voltage</i>"
you set or start Windows in safe mode and watch the latest log data for
the last set voltage</li></ul></li><li>Prime95
has calculation errors:<br><img alt="x" src="Screenshots/Prime95_%27FATAL_ERROR%27_marked.PNG" height="420" width="551"><br>That is a hint that the voltage is too low.<br>Then you should increase the voltage
for the performance state the calculation error occured in as soon as
possible. So you can avoid a reboot because of system instability.<br><a href="x86InfoAndControl_usage.html#high_load"></a></li></ul>then do the
following:<br></li><ul><li>for the service (also possible for the GUI) to select the voltage for
the on-demand performance switching (Dynamic Voltage and Frequency
Scaling):<br>use the voltage "<i>low_stable_voltage</i>"
=&nbsp; "<i>low<b>est</b>_stable_voltage"</i>
+ 4 voltage steps" or "<i>lowest_stable_voltage"</i> + 5
voltage steps" &nbsp;for the configuration (file) for the
performance state / frequency that was tested.<br>e.g.
the&nbsp;<i>low<b>est</b>_stable_voltage</i>
is 1.148 Volt and the CPU is a "Pentium M": <br>"<i>low_stable_voltage</i>"
=&nbsp; 1.148 Volt + 4 voltage steps = 1.148 Volt + 4 * 0.016 Volt
= 1.212 Volt<br>write this value into the file "configuration/<i>CPU
Vendor</i>/<i>CPU family</i>/<i>CPU model</i>/<i>CPU
stepping</i>/<i>CPU name</i>.xml",<br>e.g.
"C:\X86Info_and_Control\configuration\GenuineIntel\6\13\6\Intel(R)
Pentium(R) M processor 1.80GHz.xml" for a Pentium M 745<br><a href="p-state_configuration_file.html">Structure
of the performance-state config file</a>&nbsp;</li><li>if
you sometimes switch from altenate current to direct current (battery
mode)&nbsp;what is pretty common with notebooks: <br>test if
the "<i>low_stable_voltage</i>"
is really stable by an additional test:<br>If
the CPU is inside a device that switches from AC to DC in case of
&nbsp;no more current from the&nbsp;power adapter (like usual
notebooks
do):</li><ol><li>insert a
charged battery into the notebook</li><li><b><a name="put_it_into_Alternate_Current_mode"></a>put it
into Alternate Current mode</b> (so it gets its current from
power adapter)&nbsp;</li><li>remove
from&nbsp;Alternate Current mode (e.g unplug&nbsp;the power
cord) so it switches to Direct Current (=battery ) mode</li><li></li><ul><li>if
the device is not freezed:<br>go to step "<a href="x86InfoAndControl_usage.html#put_it_into_Alternate_Current_mode">put it into
Alternate Current mode</a>"&nbsp; and you want to ensure that
this was not just a
piece of luck</li><li>if the device is freezed:<br>"<i>low_stable_voltage</i>"
= "<i>low_stable_voltage</i> -1 " or&nbsp;"<i>low_stable_voltage</i>
-2 "<br>go to step "<a href="usage.html#put_it_into_Alternate_Current_mode">put it
into Alternate Current mode</a>"</li></ul><li>now
you can specify "<i>low_stable_voltage</i>" in
the&nbsp;configuration
file for the p-state you tested for the service and/ or GUI</li></ol><li>for the next frequency to test&nbsp;<a href="#select_p-state">redo</a></li></ul></ul></li></ol></body></html>